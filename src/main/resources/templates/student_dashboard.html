<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>Student Dashboard</title>
</head>
<body>

<div layout:fragment="content">
    <h1 th:text="|Welcome, ${student.name}!|">Welcome, Student!</h1>
    <hr>

    <h2 class="mt-4">Your Upcoming Classes</h2>
    <table class="table table-striped table-bordered mt-3">
        <thead class="table-dark">
        <tr>
            <th>Subject</th>
            <th>Date & Time</th>
            <th>Tutor</th>
            <th>Location / Link</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="schedule : ${schedules}">
            <td th:text="${schedule.subjectName}"></td>
            <td th:text="${#temporals.format(schedule.dateTime, 'yyyy-MM-dd HH:mm')}"></td>
            <td th:text="${schedule.tutor.name}"></td>
            <td th:text="${schedule.location}"></td>
        </tr>
        <tr th:if="${#lists.isEmpty(schedules)}">
            <td colspan="4" class="text-center">You are not enrolled in any classes yet.</td>
        </tr>
        </tbody>
    </table>

    <hr>

    <h2 class="mt-4">Lesson Materials</h2>
    <table class="table table-striped table-bordered mt-3">
        <thead class="table-dark">
        <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="lesson : ${lessons}">
            <td th:text="${lesson.title}"></td>
            <td th:text="${lesson.description}"></td>
            <td>
                <a th:href="@{/lessons/download/{fileName}(fileName=${lesson.fileName})}" class="btn btn-success btn-sm">Download</a>
            </td>
        </tr>
        <tr th:if="${#lists.isEmpty(lessons)}">
            <td colspan="3" class="text-center">No lesson materials have been uploaded yet.</td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>